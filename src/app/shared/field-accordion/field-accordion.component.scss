.mat-accordion {
  display: block;

  .mat-expansion-panel {
    margin-bottom: -.5rem;
    background: none;
    box-shadow: none;

    .mat-expansion-panel-header {
      justify-content: space-between;
      align-items: flex-start;
      padding: 0;

      // Restores normal colour (originally gray due to disabled state)
      // NOTE: disabling the header prevents the whole of it becoming clickable.
      &[aria-disabled=true] {
        color: inherit;
      }

      .mat-expansion-panel-header-description {
        overflow: hidden;
      }
    }

    .field-chips {
      overflow: hidden;
      padding: .3rem 1rem 0;

      .field-chip {
        display: flex;
        overflow: hidden;
        background: transparent;
        border: 1px solid var(--accent);
        cursor: pointer;

        &.delete {
          border-color: var(--warn-dark);

          * {
            color: var(--warn-dark) !important;
          }
        }

        .chip-text {
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          font-weight: 400;
        }

        // Removes the default gray background on hover/focus
        &:after {
          opacity: 0 !important;
        }

        &:hover {
          .chip-text {
            color: var(--accent);
          }
        }

        .mat-icon {
          opacity: .7;
          color: var(--accent);
          

          &:hover {
            opacity: 1;
          }
        }
      }
    }

    .expand-btn {
      width: auto;

      .expand-icon {
        margin-top: -.2rem;
        transition: transform .3s ease;
      }
    }
    
    &.mat-expanded {
      margin-bottom: -1rem;

      .mat-expansion-panel-header {
        height: 48px;
      }

      .expand-icon {
        transform: rotate(180deg);
      }
    }
  }
}